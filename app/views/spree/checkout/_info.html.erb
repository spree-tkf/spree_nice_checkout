<% if @order.state == 'delivery' %>
  <div id="checkout-so-far">
    <div class="tag grey">
      <%= Spree.t(:contact) %>
    </div>
    <div class="info">
      <%= @order.name %>, <%= @order.email %>
    </div>
    <div class="link text-right">
      <%= link_to Spree.t(:change), spree.checkout_state_path('address') %>
    </div>
    <span class="fw border-top"></span>
    <div class="tag grey">
      <%= Spree.t(:ship_to) %>
    </div>
    <div class="info ">
      <%= @order.shipping_address.address1 %>,
      <% if @order.shipping_address.address2.present? %>
        <%= @order.shipping_address.address2 %>,
      <% end %>
      <% if @order.shipping_address.company.present? %>
        <%= @order.shipping_address.company %>,
      <% end %>
        <%= @order.shipping_address.city %>,
      <% if @order.shipping_address.state.present? %>
        <%= @order.shipping_address.state %>,
      <% end %>
      <% if @order.shipping_address.zipcode.present? %>
        <%= @order.shipping_address.zipcode %>,
      <% end %>
        <%= @order.shipping_address.country %>
    </div>
    <div class="link text-right">
      <%= link_to Spree.t(:change), spree.checkout_state_path('address') %>
    </div>
  </div>
<% end %>

<% if @order.state == 'payment' %>
  <div id="checkout-so-far">
    <div class="tag grey">
      <%= Spree.t(:contact) %>
    </div>
    <div class="info">
      <%= @order.name %>, <%= @order.email %>
    </div>
    <div class="link text-right">
      <%= link_to Spree.t(:change), spree.checkout_state_path('address') %>
    </div>

    <!-- Bill To -->
    <% unless @order.bill_address == @order.ship_address %>
      <span class="fw border-top"></span>
      <div class="tag grey">
        <%= Spree.t(:bill_to) %>
      </div>
      <div class="info ">
        <%= @order.billing_address.address1 %>,
        <% if @order.billing_address.address2.present? %>
          <%= @order.billing_address.address2 %>,
        <% end %>
        <% if @order.billing_address.company.present? %>
          <%= @order.billing_address.company %>,
        <% end %>
          <%= @order.billing_address.city %>,
        <% if @order.billing_address.state.present? %>
          <%= @order.billing_address.state %>,
        <% end %>
        <% if @order.billing_address.zipcode.present? %>
          <%= @order.billing_address.zipcode %>,
        <% end %>
          <%= @order.billing_address.country %>
      </div>
      <div class="link text-right">
        <%= link_to Spree.t(:change), spree.checkout_state_path('address') %>
      </div>
    <% end %>

    <!-- Ship To -->
    <span class="fw border-top"></span>
    <div class="tag grey">
      <%= Spree.t(:ship_to) %>
    </div>
    <div class="info ">
      <%= @order.shipping_address.address1 %>,
      <% if @order.shipping_address.address2.present? %>
        <%= @order.shipping_address.address2 %>,
      <% end %>
      <% if @order.shipping_address.company.present? %>
        <%= @order.shipping_address.company %>,
      <% end %>
        <%= @order.shipping_address.city %>,
      <% if @order.shipping_address.state.present? %>
        <%= @order.shipping_address.state %>,
      <% end %>
      <% if @order.shipping_address.zipcode.present? %>
        <%= @order.shipping_address.zipcode %>,
      <% end %>
        <%= @order.shipping_address.country %>
    </div>
    <div class="link text-right">
      <%= link_to Spree.t(:change), spree.checkout_state_path('address') %>
    </div>
    <span class="fw border-top"></span>
    <div class="tag grey">
      <%= Spree.t(:method) %>
    </div>
    <div class="info ">
      <% @order.shipments.each do |shipment| %>
      <%= shipment.shipping_method.name %>
      <% end %>
    </div>
    <div class="link text-right">
      <%= link_to Spree.t(:change), spree.checkout_state_path('delivery') %>
    </div>
  </div>
<% end %>
